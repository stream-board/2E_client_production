webpackJsonp([1],{"3Dvp":function(e,t){},"4OVm":function(e,t,n){e.exports=n.p+"static/img/logo-white.608319e.png"},"7zck":function(e,t){},"9fOW":function(e,t){},GYqU:function(e,t){},JNks:function(e,t){},L1sT:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),i={name:"App",data:function(){return{drawer:!1}},props:{source:String}},a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{attrs:{id:"app-container"}},[t("router-view")],1)},staticRenderFns:[]};var s=n("VU/8")(i,a,!1,function(e){n("SDC+")},null,null).exports,r=n("/ocq"),c=n("2R8v"),l=n.n(c),d=n("tlQw"),u=n.n(d),m=l()(["\n  query ValidateTokenQuery($uid: String!, $client: String!, $token: String!){\n    validateSession(headersSession:{\n      uid: $uid,\n      client: $client,\n      token: $token\n    }) {\n      id,\n      name,\n      nickname,\n      image,\n      token,\n      client,\n      type\n    }\n  }\n"],["\n  query ValidateTokenQuery($uid: String!, $client: String!, $token: String!){\n    validateSession(headersSession:{\n      uid: $uid,\n      client: $client,\n      token: $token\n    }) {\n      id,\n      name,\n      nickname,\n      image,\n      token,\n      client,\n      type\n    }\n  }\n"]),v=l()(["\n  query AllRoomsQuery{\n    allRooms{\n      idRoom,\n      nameRoom,\n      descriptionRoom,\n      categoryRoom,\n      owner{\n        id,\n        name,\n        nickname,\n        image\n      }\n    }\n  }\n"],["\n  query AllRoomsQuery{\n    allRooms{\n      idRoom,\n      nameRoom,\n      descriptionRoom,\n      categoryRoom,\n      owner{\n        id,\n        name,\n        nickname,\n        image\n      }\n    }\n  }\n"]),p=l()(["\n  query RoomByIdQuery($id: Int!){\n    roomById(id: $id){\n      nameRoom,\n      descriptionRoom,\n      idRoom,\n      categoryRoom,\n      owner{\n        id\n      }\n      Participants{\n        id,\n        name,\n        nickname,\n        image\n      }\n    }\n  }\n"],["\n  query RoomByIdQuery($id: Int!){\n    roomById(id: $id){\n      nameRoom,\n      descriptionRoom,\n      idRoom,\n      categoryRoom,\n      owner{\n        id\n      }\n      Participants{\n        id,\n        name,\n        nickname,\n        image\n      }\n    }\n  }\n"]),f=l()(["\n  query MessagesByRoomIdQuery($id: Int!){\n    chatMsgByRoomId(id: $id){\n      user_id,\n      message\n    }\n  }\n"],["\n  query MessagesByRoomIdQuery($id: Int!){\n    chatMsgByRoomId(id: $id){\n      user_id,\n      message\n    }\n  }\n"]),h=l()(["\n  query UserImageByIdQuery($id: Int!){\n    userById(id: $id){\n      data{\n        image\n      }\n    }\n  }\n"],["\n  query UserImageByIdQuery($id: Int!){\n    userById(id: $id){\n      data{\n        image\n      }\n    }\n  }\n"]),g=l()(["\n  query ParticipantsById($id: Int!){\n    participantsById(id: $id){\n      id,\n      name,\n      nickname,\n      image\n    }\n  }\n"],["\n  query ParticipantsById($id: Int!){\n    participantsById(id: $id){\n      id,\n      name,\n      nickname,\n      image\n    }\n  }\n"]),k=l()(["\n  mutation CreateSessionMutation($email: String!, $password: String!) {\n    createSession(\n      session:{\n        email: $email,\n        password: $password,\n      }\n    ) {\n      id\n      name\n      email\n      nickname\n      image\n      token\n      client\n    }\n  }\n"],["\n  mutation CreateSessionMutation($email: String!, $password: String!) {\n    createSession(\n      session:{\n        email: $email,\n        password: $password,\n      }\n    ) {\n      id\n      name\n      email\n      nickname\n      image\n      token\n      client\n    }\n  }\n"]),b=l()(["\nmutation CreateRoomMutation($idOwner: Int!, $nameRoom: String!, $descriptionRoom: String!, $categoryRoom: String!) {\n  createRoom(\n    room:{\n      idOwner: $idOwner,\n      nameRoom: $nameRoom,\n      descriptionRoom: $descriptionRoom,\n      categoryRoom: $categoryRoom\n    }\n  ) {\n    idRoom\n  }\n}\n"],["\nmutation CreateRoomMutation($idOwner: Int!, $nameRoom: String!, $descriptionRoom: String!, $categoryRoom: String!) {\n  createRoom(\n    room:{\n      idOwner: $idOwner,\n      nameRoom: $nameRoom,\n      descriptionRoom: $descriptionRoom,\n      categoryRoom: $categoryRoom\n    }\n  ) {\n    idRoom\n  }\n}\n"]),y=l()(["\nmutation JoinRoomMutation($idOwner: Int!, $idRoom: Int!) {\n  joinRoom(\n    room:{\n      idOwner: $idOwner,\n      idRoom: $idRoom\n    }\n  ) {\n    idRoom\n  }\n}\n"],["\nmutation JoinRoomMutation($idOwner: Int!, $idRoom: Int!) {\n  joinRoom(\n    room:{\n      idOwner: $idOwner,\n      idRoom: $idRoom\n    }\n  ) {\n    idRoom\n  }\n}\n"]),_=l()(["\nmutation DeleteRoomMutation($idOwner: Int!, $idRoom: Int!) {\n  deleteRoom(\n    roomDelete:{\n      idOwner: $idOwner,\n      idRoom: $idRoom\n    }\n  ) {\n    idRoom\n  }\n}\n"],["\nmutation DeleteRoomMutation($idOwner: Int!, $idRoom: Int!) {\n  deleteRoom(\n    roomDelete:{\n      idOwner: $idOwner,\n      idRoom: $idRoom\n    }\n  ) {\n    idRoom\n  }\n}\n"]),w=l()(["\nmutation ExitRoomMutation($idOwner: Int!, $idRoom: Int!) {\n  exitRoom(\n    roomDelete:{\n      idOwner: $idOwner,\n      idRoom: $idRoom\n    }\n  ) {\n    idRoom\n  }\n}\n"],["\nmutation ExitRoomMutation($idOwner: Int!, $idRoom: Int!) {\n  exitRoom(\n    roomDelete:{\n      idOwner: $idOwner,\n      idRoom: $idRoom\n    }\n  ) {\n    idRoom\n  }\n}\n"]),R=l()(["\nmutation DeleteSessionMutation($uid: String!, $token: String!, $client: String!) {\n  deleteSession(headersSession: {\n    uid: $uid,\n    token: $token,\n    client: $client\n  }){\n    success\n  }\n}\n"],["\nmutation DeleteSessionMutation($uid: String!, $token: String!, $client: String!) {\n  deleteSession(headersSession: {\n    uid: $uid,\n    token: $token,\n    client: $client\n  }){\n    success\n  }\n}\n"]),x=l()(["\nsubscription RoomAdded{\n  roomAdded{\n    idRoom,\n    nameRoom,\n    owner{\n      id,\n      name,\n      nickname,\n      image\n    },\n    descriptionRoom,\n    categoryRoom\n  }\n}"],["\nsubscription RoomAdded{\n  roomAdded{\n    idRoom,\n    nameRoom,\n    owner{\n      id,\n      name,\n      nickname,\n      image\n    },\n    descriptionRoom,\n    categoryRoom\n  }\n}"]),C=l()(["\nsubscription ParticipantJoined($roomId: Int!){\n  participantJoined(roomId: $roomId){\n    id,\n    name,\n    nickname,\n    image\n  }\n}"],["\nsubscription ParticipantJoined($roomId: Int!){\n  participantJoined(roomId: $roomId){\n    id,\n    name,\n    nickname,\n    image\n  }\n}"]),I=l()(["\nsubscription ParticipantLeft($roomId: Int!){\n  participantLeft(roomId: $roomId)\n}"],["\nsubscription ParticipantLeft($roomId: Int!){\n  participantLeft(roomId: $roomId)\n}"]),S=u()(m),B=u()(v),T=u()(p),O=u()(f),E=u()(h),F=u()(g),M=u()(k),D=u()(b),P=u()(y),A=u()(_),L=u()(w),j=u()(R),q=u()(x),N=u()(C),J=u()(I),V=[{name:"Red",value:"#f44336"},{name:"Pink",value:"#e91e63"},{name:"Purple",value:"#9c27b0"},{name:"Deep Purple",value:"#673ab7"},{name:"Indigo",value:"#3f51b5"},{name:"Blue",value:"#2196f3"},{name:"Cyan",value:"#00bcd4"},{name:"Teal",value:"#009688"},{name:"Green",value:"#4caf50"},{name:"Lime",value:"#cddc39"},{name:"Yellow",value:"#ffeb3b"},{name:"Orange",value:"#ff9800"},{name:"Brown",value:"#795548"},{name:"Grey",value:"#9e9e9e"},{name:"Blue Grey",value:"#607d8b"},{name:"Black",value:"#000000"}],Y=[{name:"8px",value:8},{name:"12px",value:12},{name:"16px",value:16},{name:"20px",value:20},{name:"24px",value:24},{name:"28px",value:28},{name:"32px",value:32},{name:"36px",value:36}],U=[{name:"Eraser",value:"eraser",icon:"mdi-eraser"},{name:"Straight Line",value:"line",icon:"mdi-ray-start-end"},{name:"Brush",value:"point",icon:"brush"}],Q=[{name:"Politics",value:"politics",icon:"account_balance"},{name:"Programming",value:"programming",icon:"code"},{name:"Music",value:"music",icon:"music_note"},{name:"Movies",value:"movies",icon:"movie"},{name:"Books",value:"books",icon:"import_contacts"},{name:"Relaxing",value:"relaxing",icon:"weekend"},{name:"Gaming",value:"gaming",icon:"videogame_asset"},{name:"Math",value:"math",icon:"functions"},{name:"Languages",value:"languages",icon:"public"},{name:"Science",value:"science",icon:"lightbulb_outline"}],H={name:"Lobby",apollo:{allRooms:{query:B,fetchPolicy:"network-only",subscribeToMore:{document:q,updateQuery:function(e,t){var n=t.subscriptionData,o=e.allRooms.slice(0);return o.push(n.data.roomAdded),{allRooms:o}}},update:function(e){var t=this,n=[];return e.allRooms.forEach(function(e){var o=t.categories.filter(function(t){return t.value===e.categoryRoom})[0];o||(o=t.categories[0]);var i={idRoom:e.idRoom,owner:e.owner,nameRoom:e.nameRoom,descriptionRoom:e.descriptionRoom,category:o};n.push(i)}),n}}},data:function(){return{createDialog:!1,joinDialog:!1,snackbar:!1,message:"Error while creating room",roomsList:[],user:JSON.parse(localStorage.getItem("user")),selectedCategory:"all",newRoom:{},joinId:null,categories:Q,allRooms:[]}},methods:{joinRoom:function(e){var t=this,n=JSON.parse(localStorage.getItem("user"));this.$apollo.mutate({mutation:P,variables:{idOwner:n.id,idRoom:e}}).then(function(n){t.$router.push({path:"/app/"+e})}).catch(function(e){console.log(e),t.message="Room doesn't exist",t.snackbar=!0})},createRoom:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.$apollo.mutate({mutation:D,variables:{idOwner:t.id,nameRoom:this.newRoom.name,descriptionRoom:this.newRoom.description,categoryRoom:this.newRoom.category}}).then(function(t){var n=t.data.createRoom.idRoom;e.$router.push({path:"/app/"+n})}).catch(function(t){console.log(t),e.message="Error creating room",e.snackbar=!0})},cancelCreate:function(){this.newRoom={},this.createDialog=!1},cancelJoin:function(){this.joinId=null,this.joinDialog=!1},sortBy:function(e){this.selectedCategory=e},checkCategory:function(e){return"all"===this.selectedCategory||this.selectedCategory===e},logout:function(){var e=this,t=JSON.parse(localStorage.getItem("user"));this.$apollo.mutate({mutation:j,variables:{uid:t.email,token:t.token,client:t.client}}).then(function(t){localStorage.setItem("user",""),e.$router.push({path:"/login"})}).catch(function(t){console.log(t),e.message="Error logging out",e.snackbar=!0})}},computed:{orderedCategories:function(){return this.categories.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})}}},z={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-container",[o("v-navigation-drawer",{attrs:{fixed:"",app:"",clipped:"",id:"drawer"}},[o("v-container",[o("v-layout",{attrs:{row:"",wrap:"","text-xs-center":""}},[o("v-flex",{attrs:{xs12:""}},[o("v-avatar",{staticClass:"grey lighten-4",attrs:{size:"64"}},[o("img",{attrs:{src:e.user.image,alt:"avatar"}})])],1),e._v(" "),o("v-flex",{staticClass:"mt-3",attrs:{xs12:""}},[o("h1",{staticClass:"headline"},[e._v(e._s(e.user.name))])]),e._v(" "),o("v-flex",{staticClass:"mt-1 grey--text",attrs:{xs12:""}},[o("h1",{staticClass:"subheading"},[e._v(e._s(e.user.nickname))])]),e._v(" "),o("v-flex",{staticClass:"grey--text",attrs:{xs12:""}},[o("h1",{staticClass:"subheading"},[e._v(e._s(e.user.email))])])],1)],1),e._v(" "),o("v-list",{attrs:{dense:"",id:"categories"}},[o("v-divider"),e._v(" "),o("v-list-tile",{attrs:{value:"all"===e.selectedCategory},on:{click:function(t){e.sortBy("all")}}},[o("v-list-tile-action",[o("v-icon",[e._v("home")])],1),e._v(" "),o("v-list-tile-content",[o("v-list-tile-title",[e._v("All")])],1)],1),e._v(" "),e._l(e.orderedCategories,function(t){return[o("v-list-tile",{key:t.value,attrs:{value:t.value===e.selectedCategory},on:{click:function(n){e.sortBy(t.value)}}},[o("v-list-tile-action",[o("v-icon",[e._v(e._s(t.icon))])],1),e._v(" "),o("v-list-tile-content",[o("v-list-tile-title",[e._v(e._s(t.name))])],1)],1)]})],2)],1),e._v(" "),o("v-toolbar",{attrs:{color:"accent",dark:"",fixed:"",app:"","clipped-left":""}},[o("v-toolbar-title",[o("img",{attrs:{src:n("4OVm"),id:"logo"}})]),e._v(" "),o("v-spacer"),e._v(" "),o("v-btn",{attrs:{icon:""},on:{click:function(t){e.logout()}}},[o("v-icon",[e._v("exit_to_app")])],1)],1),e._v(" "),o("v-content",{staticStyle:{"padding-left":"0","padding-top":"0"},attrs:{id:"content-container"}},[o("v-container",{attrs:{fluid:"","fill-height":""}},[o("v-layout",{attrs:{"justify-center":"",row:"",wrap:""}},[o("v-flex",{attrs:{xs12:"","text-xs-center":""}},[o("h1",{staticClass:"display-3"},[e._v("Welcome to StreamBoard")])]),e._v(" "),o("v-flex",{attrs:{xs12:"","text-xs-center":""}},[o("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.joinDialog,callback:function(t){e.joinDialog=t},expression:"joinDialog"}},[o("v-btn",{attrs:{slot:"activator",color:"primary"},slot:"activator"},[e._v("JOIN A ROOM")]),e._v(" "),o("v-card",[o("v-card-title",{staticClass:"headline"},[e._v("Join a Room")]),e._v(" "),o("v-card-text",[o("v-text-field",{attrs:{autofocus:"",label:"Room Id",mask:"#######################"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.joinRoom(e.joinId)}},model:{value:e.joinId,callback:function(t){e.joinId=t},expression:"joinId"}})],1),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"error",flat:""},nativeOn:{click:function(t){e.cancelJoin()}}},[e._v("Cancel")]),e._v(" "),o("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.joinRoom(e.joinId)}}},[e._v("Join")])],1)],1)],1),e._v(" "),o("v-dialog",{attrs:{persistent:"","max-width":"500px"},model:{value:e.createDialog,callback:function(t){e.createDialog=t},expression:"createDialog"}},[o("v-btn",{attrs:{slot:"activator",color:"primary"},slot:"activator"},[e._v("CREATE A ROOM")]),e._v(" "),o("v-card",[o("v-card-title",[o("span",{staticClass:"headline"},[e._v("Create a Room")])]),e._v(" "),o("v-card-text",[o("v-container",{attrs:{"grid-list-md":""}},[o("v-layout",{attrs:{wrap:""}},[o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{attrs:{autofocus:"",label:"Name",required:""},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.createRoom()}},model:{value:e.newRoom.name,callback:function(t){e.$set(e.newRoom,"name",t)},expression:"newRoom.name"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-text-field",{attrs:{label:"Description","multi-line":""},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.createRoom()}},model:{value:e.newRoom.description,callback:function(t){e.$set(e.newRoom,"description",t)},expression:"newRoom.description"}})],1),e._v(" "),o("v-flex",{attrs:{xs12:""}},[o("v-select",{attrs:{label:"Category",required:"",items:e.categories,"item-text":"name"},scopedSlots:e._u([{key:"item",fn:function(t){return[o("v-list-tile-avatar",[o("v-icon",[e._v(e._s(t.item.icon))])],1),e._v(" "),o("v-list-tile-content",[o("v-list-tile-title",{domProps:{innerHTML:e._s(t.item.name)}})],1)]}}]),model:{value:e.newRoom.category,callback:function(t){e.$set(e.newRoom,"category",t)},expression:"newRoom.category"}})],1)],1)],1)],1),e._v(" "),o("v-card-actions",[o("v-spacer"),e._v(" "),o("v-btn",{attrs:{color:"error",flat:""},nativeOn:{click:function(t){e.cancelCreate()}}},[e._v("Cancel")]),e._v(" "),o("v-btn",{attrs:{color:"primary"},nativeOn:{click:function(t){e.createRoom()}}},[e._v("Create")])],1)],1)],1),e._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:function(t){e.refresh()}}},[e._v("REFRESH")])],1),e._v(" "),o("v-list",{staticClass:"list mt-5",attrs:{"two-line":""}},[o("v-flex",{attrs:{xs12:""}},e._l(e.allRooms,function(t){return o("v-list-tile",{key:t.idRoom,staticClass:"room",attrs:{avatar:""}},[o("v-list-tile-action",[o("v-icon",[e._v(e._s(t.category.icon))])],1),e._v(" "),o("v-list-tile-avatar",[o("img",{attrs:{src:t.owner.image}})]),e._v(" "),o("v-list-tile-content",[o("v-list-tile-title",[e._v(e._s(t.nameRoom))]),e._v(" "),o("v-list-tile-sub-title",[o("span",{staticClass:"bold"},[e._v(e._s(t.owner.name))]),e._v(" - "+e._s(t.descriptionRoom))])],1),e._v(" "),o("v-btn",{attrs:{color:"primary"},on:{click:function(n){e.joinRoom(t.idRoom)}}},[e._v("JOIN")])],1)}))],1)],1)],1)],1),e._v(" "),o("v-snackbar",{attrs:{color:"error"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\r\n    "+e._s(e.message)+"\r\n    "),o("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.snackbar=!1}}},[o("v-icon",[e._v("close")])],1)],1)],1)},staticRenderFns:[]};var W=n("VU/8")(H,z,!1,function(e){n("ixA9")},"data-v-7d52eea8",null).exports,G={name:"Board",data:function(){return{socket:null,isAllowed:!1,selectedColor:"#f44336",selectedThickness:8,selectedType:"point"}},mounted:function(){var e=this,t=JSON.parse(localStorage.getItem("user")),n="35.196.37.210:4002?room="+this.$route.params.roomid+"&nick="+t.nickname+"&id="+t.id;this.socket=io(n),function(e,t){var n,o,i,a=t.$swal,s=t.socket,r=t.$bus,c=!1,l=!1,d={};function u(){s.on("newDrawer",function(e){r.emit("new-drawer",e)}),s.on("userDisconnected",function(e){r.emit("user-disconnected",e)}),s.on("admin",function(){t.isAllowed=!0,t.setAdmin(),t.changePermissions(!0)}),s.on("draw",function(e){!function(e){switch(e.type){case"path":console.log(e.color),I(e.color,e.thickness,e.event,e.coords.x,e.coords.y);break;case"line":C(e.color,e.thickness,e.coords.start.x,e.coords.start.y,e.coords.end.x,e.coords.end.y)}}(e)}),s.on("clear",function(){p()}),s.on("askForBoard",function(e){a({title:"Turn petition",text:"User "+e.nick+" wants to use the board",type:"question",showCancelButton:!0,confirmButtonColor:"#26d3cd",cancelButtonColor:"#f44336",confirmButtonText:"Yes, approve",cancelButtonText:"No, disapprove"}).then(function(n){n.value?(a({title:"Approved",text:"User has the permission",type:"success",confirmButtonColor:"#26d3cd"}),t.isAllowed=!1,t.changePermissions(!1),s.emit("answerForBoard",{answer:!0,socketId:e.socketId})):(a({title:"Disapproved",text:"You disapproved the user",type:"error",confirmButtonColor:"#26d3cd"}),s.emit("answerForBoard",{answer:!1,socketId:e.socketId}))})}),s.on("answerForBoard",function(e){e?(a({title:"Permission granted",text:"You can draw on the board",type:"success",confirmButtonColor:"#26d3cd"}),t.changePermissions(!0),t.isAllowed=!0):(a({title:"Permission denied",text:"You can't draw on the board",type:"error",confirmButtonColor:"#26d3cd"}),t.changePermissions(!1),t.isAllowed=!1)}),s.on("resetBoard",function(e){t.changePermissions(!0),t.isAllowed=!0,a({title:"You took the pen back",text:"You can start drawing again",type:"success",confirmButtonColor:"#26d3cd"})}),s.on("lostPermission",function(){t.changePermissions(!1),t.isAllowed=!1,a({title:"You lost permission",text:"You can no longer draw",type:"error",confirmButtonColor:"#26d3cd"})}),s.on("hostLeft",function(){a({title:"Call finished",text:"The host has left the room, you got disconnected from the room",type:"info",confirmButtonColor:"#26d3cd",confirmButtonText:"Return to lobby"}).then(function(e){t.$router.push("/app")})}),t.$bus.on("clear-board",function(){p()})}function m(){return t.selectedType}function v(){i.putImageData(n,0,0)}function p(){i.fillStyle="#FFFFFF",i.fillRect(0,0,o.width,o.height)}function f(e,n){s.emit("draw",{type:"path",event:e,coords:n,color:t.selectedColor,thickness:t.selectedThickness})}function h(e,n){s.emit("draw",{type:"path",event:e,coords:n,color:"#FFFFFF",thickness:t.selectedThickness})}function g(e){l=!0,"SELECT"!==event.target.nodeName&&e.preventDefault();var t=e.changedTouches[0].clientX-o.offsetLeft,n=e.changedTouches[0].clientY-o.offsetTop;c||R(t,n)}function k(e){l=!0,e.preventDefault();var t=e.changedTouches[0].clientX-o.offsetLeft,n=e.changedTouches[0].clientY-o.offsetTop;$(t,n)}function b(e){l=!0,e.preventDefault();var t=e.changedTouches[0].clientX-o.offsetLeft,n=e.changedTouches[0].clientY-o.offsetTop;x(t,n)}function y(e){if(!l){var t=e||window.event,n=t.clientX*o.width/o.clientWidth,i=t.clientY*o.height/o.clientHeight;if(R(n,i),!t.preventDefault)return!1;"SELECT"!==t.target.nodeName&&t.preventDefault()}}function _(e){if(!l){var t=e||window.event,n=t.clientX*o.width/o.clientWidth,i=t.clientY*o.height/o.clientHeight;if($(n,i),!t.preventDefault)return!1;t.preventDefault()}}function w(e){if(!l){var t=e||window.event,n=t.clientX*o.width/o.clientWidth,i=t.clientY*o.height/o.clientHeight;x(n,i)}}function R(e,a){if(t.isAllowed)switch(c=!0,d.x=e,d.y=a,m()){case"point":I(t.selectedColor,t.selectedThickness,"start",e,a),f("start",d);break;case"line":n=i.getImageData(0,0,o.width,o.height);break;case"eraser":I("#FFFFFF",t.selectedThickness,"start",e,a),h("start",d)}}function $(e,n){if(c&&t.isAllowed)switch(m()){case"point":I(t.selectedColor,t.selectedThickness,"move",e,n),f("move",{x:e,y:n});break;case"line":v(),C(t.selectedColor,t.selectedThickness,d.x,d.y,e,n);break;case"eraser":I("#FFFFFF",t.selectedThickness,"move",e,n),h("move",{x:e,y:n})}}function x(e,n){if(c&&t.isAllowed)switch(m()){case"point":I(t.selectedColor,t.selectedThickness,"end",e,n),f("end",{x:e,y:n});break;case"line":v(),C(t.selectedColor,t.selectedThickness,d.x,d.y,e,n),o={start:{x:d.x,y:d.y},end:{x:e,y:n}},s.emit("draw",{type:"line",color:t.selectedColor,thickness:t.selectedThickness,coords:o});break;case"eraser":I("#FFFFFF",t.selectedThickness,"end",e,n),h("end",{x:e,y:n})}var o;c=!1}function C(e,t,n,o,a,s){i.strokeStyle=e,i.lineWidth=t,i.beginPath(),i.moveTo(n,o),i.lineTo(a,s),i.stroke(),i.closePath()}function I(e,t,n,o,a){switch(i.strokeStyle=e,i.lineWidth=t,n){case"start":i.beginPath(),i.moveTo(o,a);break;case"move":i.lineTo(o,a),i.stroke();break;case"end":i.closePath()}}u(),r.on("ask-for-turn",t.askForTurn),r.on("take-back-pencil",t.takeBackPencil),r.on("change-color",function(e){t.selectedColor=e,t.updateCursor()}),r.on("change-thickness",function(e){t.selectedThickness=e.value,t.updateCursor()}),r.on("change-type",function(e){t.selectedType=e,t.updateCursor()}),r.on("clear-board",function(){t.clearBoard()}),r.on("user-disconnected",function(){s.disconnect()}),(o=document.getElementById("board")).width=1280,o.height=720,(i=o.getContext("2d")).lineCap="round",o.onmousedown=y,document.onmousemove=_,document.onmouseup=w,document.ontouchstart=g,document.ontouchmove=k,document.ontouchend=b}(this.$route.params.roomid,this),window.setTimeout(function(){return e.updateCursor()},50)},methods:{askForTurn:function(){this.socket.emit("askForBoard")},takeBackPencil:function(){this.socket.emit("resetBoard")},updateCursor:function(){switch(this.selectedType){case"point":case"line":$("#board").awesomeCursor("circle",{color:this.selectedColor,size:this.selectedThickness,hotspot:"center"});break;case"eraser":$("#board").awesomeCursor("circle-thin",{color:"#000000",size:this.selectedThickness,hotspot:"center"})}},setAdmin:function(){console.log("emitadmin"),this.$bus.emit("set-admin")},changePermissions:function(e){this.$bus.emit("change-permissions",e)},clearBoard:function(){this.socket.emit("clear")}}};var X={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"board-container"},[t("canvas",{attrs:{id:"board",height:"720",width:"1280"}})])}]};var Z=n("VU/8")(G,X,!1,function(e){n("NVog")},"data-v-2072f665",null).exports,K={name:"Actions",data:function(){return{mic:!0,cam:!0,admin:!1,isAllowed:!1,selectedColor:"#f44336",selectedThickness:"8px",selectedType:"brush",colors:V,thicknesses:Y,types:U,user:JSON.parse(localStorage.getItem("user")),participants:[]}},props:["room"],apollo:{participants:{query:F,variables:function(){return{id:this.$route.params.roomid}},update:function(e){return e.participantsById},subscribeToMore:[{document:N,variables:function(){return{roomId:this.$route.params.roomid}},updateQuery:function(e,t){var n=t.subscriptionData,o=e.participantsById.slice(0);return o.push(n.data.participantJoined),{participantsById:o}}},{document:J,variables:function(){return{roomId:this.$route.params.roomid}},updateQuery:function(e,t){var n=t.subscriptionData,o=e.participantsById.slice(0);return{participantsById:o=o.filter(function(e){return e.id!==n.data.participantLeft})}}}],fetchPolicy:"network-only"}},mounted:function(){var e=this;this.$bus.on("set-admin",function(){e.admin=!0}),this.$bus.on("change-permissions",function(t){e.isAllowed=t})},methods:{exitToLobby:function(){this.$router.push("/app")},askForMic:function(){this.$bus.emit("ask-for-mic")},askForBoard:function(){this.$bus.emit("ask-for-turn")},takeBackPencil:function(){this.$bus.emit("take-back-pencil")},changeColor:function(e){this.$bus.emit("change-color",e),this.selectedColor=e},changeType:function(e){this.selectedType=e.icon,this.$bus.emit("change-type",e.value)},changeThickness:function(e){this.$bus.emit("change-thickness",e),this.selectedThickness=e.name},clearBoard:function(){this.$bus.emit("clear-board")},banUser:function(e){console.log("ban")}}},ee={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"actions-container",attrs:{fluid:"","grid-list-md":"","text-xs-center":""}},[n("v-layout",{attrs:{row:"","fill-height":"","align-center":""}},[n("v-flex",{attrs:{xs3:"","justify-start":""}},[n("h1",{staticClass:"title white--text"},[e._v(e._s(e.room.nameRoom))]),e._v(" "),n("span",{staticClass:"body-2 grey--text"},[e._v("Room id: "+e._s(e.room.idRoom))])]),e._v(" "),n("v-spacer"),e._v(" "),n("div",{staticClass:"divider-actions"}),e._v(" "),n("v-flex",{attrs:{xs1:""}},[n("v-menu",{attrs:{"offset-y":"","nudge-left":"120","nudge-top":"15",top:""}},[n("v-tooltip",{attrs:{slot:"activator",top:""},slot:"activator"},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",outline:"",fab:"",color:"primary"},slot:"activator"},[n("v-icon",[e._v("mdi-account-multiple")])],1),e._v(" "),n("span",[e._v("See participants")])],1),e._v(" "),n("v-container",{attrs:{id:"participants-container","grid-list-sm":""}},[n("v-layout",{attrs:{row:"",wrap:""}},[n("v-list",{attrs:{row:""}},e._l(e.participants,function(t){return n("v-list-tile",{key:t.id,attrs:{xs2:"",avatar:""}},[n("v-list-tile-avatar",[n("img",{attrs:{src:t.image}})]),e._v(" "),n("v-list-tile-content",{attrs:{xs8:""}},[n("v-list-tile-title",{domProps:{textContent:e._s(t.name)}})],1),e._v(" "),e.admin?n("v-list-tile-action",{attrs:{xs2:""}},[t.id===e.room.owner.id?n("v-icon",{attrs:{color:"primary"}},[e._v("star")]):n("v-btn",{attrs:{flat:"",icon:"",color:"error"},on:{click:function(n){e.banUser(t.id)}}},[n("v-icon",[e._v("mdi-cancel")])],1)],1):n("v-list-tile-action",{attrs:{xs2:""}},[t.id===e.room.owner.id?n("v-icon",{attrs:{color:"primary"}},[e._v("star")]):e._e()],1)],1)}))],1)],1)],1)],1),e._v(" "),n("div",{staticClass:"divider-actions"}),e._v(" "),e.admin?n("v-flex",{attrs:{xs1:""}},[n("v-tooltip",{attrs:{top:""}},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",disabled:e.isAllowed,outline:"",fab:"",color:"primary"},on:{click:function(t){e.takeBackPencil()}},slot:"activator"},[n("v-icon",[e._v("mdi-pencil-lock")])],1),e._v(" "),n("span",[e._v("Take back pencil")])],1)],1):n("v-flex",{attrs:{xs1:""}},[n("v-tooltip",{attrs:{top:""}},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",disabled:e.isAllowed,outline:"",fab:"",color:"primary"},on:{click:function(t){e.askForBoard()}},slot:"activator"},[n("v-icon",[e._v("create")])],1),e._v(" "),n("span",[e._v("Ask for board")])],1)],1),e._v(" "),n("v-flex",{attrs:{xs1:""}},[n("v-menu",{attrs:{"offset-y":"","nudge-left":"120","nudge-top":"15",top:""}},[n("v-tooltip",{attrs:{slot:"activator",top:""},slot:"activator"},[n("v-btn",{staticClass:"elevation-10",style:{backgroundColor:e.selectedColor},attrs:{slot:"activator",small:"",dark:"",fab:""},slot:"activator"},[n("v-icon",[e._v("palette")])],1),e._v(" "),n("span",[e._v("Change color")])],1),e._v(" "),n("v-container",{attrs:{id:"color-container","grid-list-sm":""}},[n("v-layout",{attrs:{row:"",wrap:""}},e._l(e.colors,function(t){return n("v-flex",{key:t.value,attrs:{xs3:""}},[n("v-tooltip",{attrs:{top:""}},[n("v-btn",{style:{backgroundColor:t.value},attrs:{slot:"activator",fab:"",dark:"",small:""},on:{click:function(n){e.changeColor(t.value)}},slot:"activator"}),e._v(" "),n("span",[e._v(e._s(t.name))])],1)],1)}))],1)],1)],1),e._v(" "),n("v-flex",{attrs:{xs1:""}},[n("v-menu",{attrs:{"offset-y":"",top:"","nudge-left":"35","nudge-top":"15"}},[n("v-tooltip",{attrs:{slot:"activator",top:""},slot:"activator"},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",outline:"",fab:"",color:"primary"},slot:"activator"},[n("v-icon",[e._v(e._s(e.selectedType))])],1),e._v(" "),n("span",[e._v("Change type")])],1),e._v(" "),n("v-list",e._l(e.types,function(t){return n("v-list-tile",{key:t.value,on:{click:function(n){e.changeType(t)}}},[n("v-list-tile-action",[n("v-icon",[e._v(e._s(t.icon))])],1),e._v(" "),n("v-list-tile-title",[e._v(e._s(t.name))])],1)}))],1)],1),e._v(" "),n("v-flex",{attrs:{xs1:""}},[n("v-menu",{attrs:{"offset-y":"",top:"","nudge-left":"50","nudge-top":"15"}},[n("v-tooltip",{attrs:{slot:"activator",top:""},slot:"activator"},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",outline:"",fab:"",color:"primary"},on:{click:function(t){e.changeThickness()}},slot:"activator"},[n("v-icon",{style:{fontSize:e.selectedThickness}},[e._v("lens")])],1),e._v(" "),n("span",[e._v("Change thickness")])],1),e._v(" "),n("v-container",{attrs:{id:"thickness-container","grid-list-sm":""}},[n("v-layout",{attrs:{row:"",wrap:""}},e._l(e.thicknesses,function(t){return n("v-flex",{key:t.value,attrs:{xs6:""}},[n("v-btn",{style:{width:t.name,height:t.name,backgroundColor:e.selectedColor},attrs:{fab:"",dark:""},on:{click:function(n){e.changeThickness(t)}}})],1)}))],1)],1)],1),e._v(" "),n("v-flex",{attrs:{xs1:""}},[n("v-tooltip",{attrs:{top:""}},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",disabled:!e.isAllowed,outline:"",fab:"",color:"primary"},on:{click:function(t){e.clearBoard()}},slot:"activator"},[n("v-icon",[e._v("delete")])],1),e._v(" "),n("span",[e._v("Clear Board")])],1)],1),e._v(" "),n("div",{staticClass:"divider-actions"}),e._v(" "),n("v-flex",{attrs:{xs1:""}},[n("v-tooltip",{attrs:{top:""}},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",outline:"",fab:"",color:"error"},on:{click:function(t){e.exitToLobby()}},slot:"activator"},[n("v-icon",[e._v("call_end")])],1),e._v(" "),n("span",[e._v("Go to lobby")])],1)],1)],1)],1)},staticRenderFns:[]};var te=n("VU/8")(K,ee,!1,function(e){n("ZmVN")},"data-v-5952e400",null).exports,ne=n("mvHQ"),oe=n.n(ne),ie=n("//Fk"),ae=n.n(ie),se=n("KMaP"),re={name:"Chat",data:function(){return{newMessage:"",emojiConverter:new EmojiConvertor,user:JSON.parse(localStorage.getItem("user")),messages:[],socket:null,roomId:0}},props:["room"],mounted:function(){var e=this;this.roomId=this.$route.params.roomid;var t=document.getElementById("new-message"),n=document.getElementById("new-message-container");t.style.height=0,t.style.height=t.scrollHeight+"px",t.addEventListener("keyup",function(){this.style.height=0,this.style.height=this.scrollHeight+"px";var e=this.scrollHeight+45;n.style.height=e+"px"},!1),this.emojiConverter.init_env(),this.emojiConverter.replace_mode="unified",this.emojiConverter.allow_native=!0,this.$apollo.query({query:O,variables:{id:this.roomId}}).then(function(t){var n=t.data.chatMsgByRoomId.slice(),o=[],i=[];n.forEach(function(t){o.push(e.$apollo.query({query:E,variables:{id:t.user_id}}).then(function(e){return e.data.userById.data.image}).catch(function(e){console.log(e)}))}),ae.a.all(o).then(function(t){for(var o=0;o<t.length;o++)i.push({message:n[o].message,user_id:n[o].user_id,image:t[o]});e.messages=i})}).catch(function(e){console.log(e)}),this.initializeSockets()},methods:{sendMessage:function(){this.socket.send(oe()({category:"NEW-MESSAGE",room_id:this.roomId,sender:"Felipe",user_id:this.user.id,message:this.newMessage})),this.newMessage="",window.setTimeout(function(){$("#new-message-container").height("10vh"),$("#new-message").height("27px")},1)},addEmoji:function(e){this.newMessage+=this.emojiConverter.replace_colons(e.colons)},initializeSockets:function(){var e=this,t="ws://35.231.29.114/chat-room/"+this.$route.params.roomid;this.socket=new ReconnectingWebSocket(t),this.socket.onopen=function(){console.log("Connected to chat socket"),e.socket.send(oe()({category:"JOIN-ROOM",room_id:e.roomId,user_id:e.user.nickname}))},this.socket.onclose=function(){console.log("Disconnected from the chat socket")},this.socket.onmessage=function(t){var n=JSON.parse(t.data);"JOIN-ROOM"!==n.category?e.$apollo.query({query:E,variables:{id:n.user_id}}).then(function(t){e.messages.push({message:n.message,user_id:n.user_id,image:t.data.userById.data.image})}).catch(function(e){console.log(e)}):e.$bus.emit("new-participant",n)}}},watch:{messages:function(){window.setTimeout(function(){$("#messages").scrollTop($("#messages")[0].scrollHeight+200)},50)}},components:{picker:se.Picker,emoji:se.Emoji}},ce={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-container",{staticClass:"chat-container"},[n("div",{attrs:{id:"messages"}},[n("ol",{staticClass:"conversation"},e._l(e.messages,function(t,o){return n("li",{key:o,staticClass:"message",class:{self:t.user_id==e.user.id,other:t.user_id!=e.user.id}},[t.user_id!=e.user.id?n("div",{staticClass:"chat-avatar"},[n("img",{attrs:{src:t.image}})]):e._e(),e._v(" "),n("div",{staticClass:"message-text",staticStyle:{"word-wrap":"break-word","max-width":"90%","text-align":"left"}},[e._v("\n          "+e._s(t.message)+"\n        ")]),e._v(" "),t.user_id==e.user.id?n("div",{staticClass:"chat-avatar"},[n("img",{attrs:{src:t.image}})]):e._e()])}))]),e._v(" "),n("v-container",{attrs:{id:"input-container"}},[n("v-layout",{attrs:{row:""}},[n("v-flex",{attrs:{xs1:""}},[n("v-menu",{attrs:{"offset-y":"",top:"","close-on-content-click":!1}},[n("v-btn",{staticStyle:{margin:"0","z-index":"4"},attrs:{slot:"activator",flat:"",icon:"",color:"white"},slot:"activator"},[n("v-icon",[e._v("mdi-emoticon-happy")])],1),e._v(" "),n("v-container",{staticStyle:{"background-color":"#FFF"}},[n("picker",{on:{click:function(t,n){return e.addEmoji(t)}}})],1)],1)],1),e._v(" "),n("div",{staticStyle:{position:"absolute",width:"100%",height:"10vh",bottom:"0",left:"0","background-color":"#174557"},attrs:{id:"new-message-container"}},[n("v-text-field",{staticStyle:{position:"absolute",width:"70%",left:"15%",bottom:"2vh","border-radius":"20px"},attrs:{id:"new-message",autofocus:"",solo:"","multi-line":"","no-resize":"",label:"Write a message"},on:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key,"Enter"))return null;e.sendMessage()}},model:{value:e.newMessage,callback:function(t){e.newMessage=t},expression:"newMessage"}})],1),e._v(" "),n("v-flex",{attrs:{xs1:"","offset-xs10":""}},[n("v-btn",{staticStyle:{margin:"0","z-index":"4"},attrs:{flat:"",icon:"",color:"white"},on:{click:function(t){e.sendMessage()}}},[n("v-icon",[e._v("send")])],1)],1)],1)],1)],1)},staticRenderFns:[]};var le={name:"Streaming",data:function(){return{videos:[],mic:!0,cam:!0,webrtc:{}}},mounted:function(){var e=this,t=new SimpleWebRTC({localVideoEl:"localVideo",remoteVideosEl:"",autoRequestMedia:!0,url:"http://35.196.163.161:4005"});this.$bus.on("user-disconnected",function(){t.stopLocalVideo(),t.leaveRoom()}),t.on("readyToCall",function(){t.joinRoom("room-"+this.$route.params.roomid),console.log("join")}),t.on("videoAdded",function(n,o){console.log(o),e.videos.push(t.getDomId(o)),window.setTimeout(function(){var e=document.getElementById(t.getDomId(o)),i=document.createElement("div");i.id="overlay-"+o.id,i.classList.add(["overlay"]),i.innerHTML='<i aria-hidden="true" class="icon material-icons mute-icon">mic</i>',e.appendChild(n),e.appendChild(i),n.oncontextmenu=function(){return!1},n.onclick=function(){var e=document.getElementById("overlay-"+o.id);0===n.volume?(n.volume=1,e.innerHTML='<i aria-hidden="true" class="icon material-icons mute-icon">mic</i>',e.classList.remove(["overlay-muted"])):(n.volume=0,e.innerHTML='<i aria-hidden="true" class="icon material-icons unmute-icon">mic_off</i>',e.classList.add(["overlay-muted"]))},n.onmouseenter=function(){document.getElementById("overlay-"+o.id).classList.add(["overlay-active"])},n.onmouseleave=function(){document.getElementById("overlay-"+o.id).classList.remove(["overlay-active"])}},100)}),this.webrtc=t},methods:{muteMic:function(){this.mic=!1,this.webrtc.mute(),this.$bus.emit("mute-mic")},unmuteMic:function(){this.mic=!0,this.webrtc.unmute(),this.$bus.emit("unmute-mic")},useCam:function(){this.cam=!0,this.webrtc.resumeVideo(),this.$bus.emit("activate-cam")},blockCam:function(){this.cam=!1,this.webrtc.pauseVideo(),this.$bus.emit("block-cam")},muteUser:function(e){console.log(e)}}},de={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"streaming-container"},[n("div",{attrs:{id:"local-container"}},[n("div",{attrs:{id:"local-video-actions"}},[e.mic?n("v-tooltip",{attrs:{top:""}},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",outline:"",fab:"",color:"primary"},on:{click:function(t){e.muteMic()}},slot:"activator"},[n("v-icon",[e._v("mic")])],1),e._v(" "),n("span",[e._v("Mute your microphone")])],1):e._e(),e._v(" "),e.mic?e._e():n("v-tooltip",{attrs:{top:""}},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",outline:"",fab:"",color:"error"},on:{click:function(t){e.unmuteMic()}},slot:"activator"},[n("v-icon",[e._v("mic_off")])],1),e._v(" "),n("span",[e._v("Unmute your microphone")])],1),e._v(" "),e.cam?n("v-tooltip",{attrs:{top:""}},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",outline:"",fab:"",color:"primary"},on:{click:function(t){e.blockCam()}},slot:"activator"},[n("v-icon",[e._v("videocam")])],1),e._v(" "),n("span",[e._v("Hide cam")])],1):e.cam?e._e():n("v-tooltip",{attrs:{top:""}},[n("v-btn",{staticClass:"elevation-10",attrs:{slot:"activator",small:"",outline:"",fab:"",color:"error"},on:{click:function(t){e.useCam()}},slot:"activator"},[n("v-icon",[e._v("videocam_off")])],1),e._v(" "),n("span",[e._v("Show cam")])],1)],1),e._v(" "),n("video",{attrs:{id:"localVideo"}})]),e._v(" "),n("carousel",{attrs:{id:"remote-container",loop:"",perPage:3,navigationEnabled:!0,scrollPerPage:!0,paginationEnabled:!1}},e._l(e.videos,function(e){return n("slide",{key:e,staticClass:"remoteVideo",attrs:{id:e}})}))],1)},staticRenderFns:[]};var ue={name:"Room",components:{board:Z,actions:te,chat:n("VU/8")(re,ce,!1,function(e){n("JNks")},"data-v-19a0a11e",null).exports,cameras:n("VU/8")(le,de,!1,function(e){n("L1sT")},null,null).exports},data:function(){return{room:{},user:JSON.parse(localStorage.getItem("user")),message:"",snackbar:!1,admin:!1}},apollo:{room:{query:T,variables:function(){return{id:this.$route.params.roomid}},update:function(e){return e.roomById},result:function(e){this.message="Welcome to "+this.room.nameRoom,this.snackbar=!0},fetchPolicy:"network-only"}},mounted:function(){var e=this;this.$bus.on("new-participant",function(t){t.message.split(" ")[0]!==""+e.user.nickname&&(e.message=t.message,e.snackbar=!0)}),this.$bus.on("user-disconnected",function(t){t&&(e.message="User "+t+" disconnected",e.snackbar=!0)}),this.$bus.on("new-drawer",function(t){e.message=t+" is now drawing",e.snackbar=!0}),this.$bus.on("set-admin",function(){e.admin=!0})},beforeRouteLeave:function(e,t,n){var o=this;this.admin?this.$swal({title:"Leaving room",text:"You're the owner of the room. If you leave, the room will be deleted and all the participants will be kicked. Are you sure you want to leave the room?",type:"warning",showCancelButton:!0,confirmButtonColor:"#26d3cd",cancelButtonColor:"#f44336",confirmButtonText:"Yes",cancelButtonText:"No"}).then(function(e){e.value?(console.log("Yes"),o.$bus.emit("user-disconnected"),o.$apollo.mutate({mutation:A,variables:{idOwner:o.user.id,idRoom:o.room.idRoom}}).then(function(e){console.log("Success"),n()}).catch(function(e){console.log(e)})):(console.log("No"),n(!1))}):this.$apollo.mutate({mutation:L,variables:{idOwner:this.user.id,idRoom:this.room.idRoom}}).then(function(e){console.log("Success"),o.$bus.emit("user-disconnected"),n()}).catch(function(e){console.log(e),n()})}},me={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"room"},[n("board",{attrs:{id:"board-container"}}),e._v(" "),n("actions",{attrs:{room:e.room,id:"actions-container"}}),e._v(" "),n("cameras",{attrs:{id:"streaming-container"}}),e._v(" "),n("chat",{attrs:{room:e.room,id:"chat-container"}}),e._v(" "),n("v-snackbar",{attrs:{color:"info",top:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n    "+e._s(e.message)+"\n    "),n("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.snackbar=!1}}},[n("v-icon",[e._v("close")])],1)],1)],1)},staticRenderFns:[]};var ve=n("VU/8")(ue,me,!1,function(e){n("3Dvp")},"data-v-68553ba3",null).exports,pe={name:"Login",data:function(){return{valid:!1,email:"",emailRules:[function(e){return!!e||"E-mail is required"},function(e){return/^\w+([.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e)||"E-mail must be valid"}],password:"",passwordRules:[function(e){return!!e||"Password is required"},function(e){return e&&e.length>=8||"Password must be at least 8 characters long"}],hidden:!0,snackbar:!1,message:"Incorrect Credentials"}},methods:{submit:function(){var e=this;this.$refs.form.validate()&&this.$apollo.mutate({mutation:M,variables:{email:this.email,password:this.password}}).then(function(t){var n=t.data.createSession;delete n.__typename,localStorage.setItem("user",oe()(n)),e.$router.push({path:"/app"})}).catch(function(t){console.log(t),e.snackbar=!0})}}},fe={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("v-app",{attrs:{id:"login-page"}},[o("v-container",{staticClass:"elevation-10",attrs:{id:"login-card"}},[o("div",{attrs:{id:"login-form"}},[o("img",{attrs:{src:n("iQH9"),id:"logo"}}),e._v(" "),o("v-container",[o("v-form",{ref:"form",attrs:{"lazy-validation":""},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[o("v-text-field",{attrs:{label:"Enter your email","prepend-icon":"mail",rules:e.emailRules,required:"",autofocus:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null}},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}}),e._v(" "),o("v-text-field",{attrs:{label:"Enter your password",hint:"At least 8 characters","prepend-icon":"lock",rules:e.passwordRules,"append-icon":e.hidden?"visibility":"visibility_off","append-icon-cb":function(){return e.hidden=!e.hidden},type:e.hidden?"password":"text",required:""},on:{keyup:function(t){return"button"in t||!e._k(t.keyCode,"enter",13,t.key,"Enter")?e.submit(t):null}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}}),e._v(" "),o("v-btn",{attrs:{fab:"",dark:"",id:"login-button"},on:{click:e.submit}},[o("v-icon",{attrs:{dark:""}},[e._v("send")])],1)],1)],1)],1),e._v(" "),o("div",{attrs:{id:"login-banner"}},[o("h1",{attrs:{id:"banner-phrase"}},[e._v("Join people around the world in interactive video conferences!")]),e._v(" "),o("img",{attrs:{src:n("P07D"),alt:"",id:"banner-image"}})]),e._v(" "),o("v-snackbar",{attrs:{color:"error"},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n      "+e._s(e.message)+"\n      "),o("v-btn",{attrs:{dark:"",flat:""},nativeOn:{click:function(t){e.snackbar=!1}}},[o("v-icon",[e._v("close")])],1)],1)],1)],1)},staticRenderFns:[]};var he=n("VU/8")(pe,fe,!1,function(e){n("QtLN")},"data-v-2e2a5fe4",null).exports,ge={name:"Application",data:function(){return{drawer:!1}},props:{source:String},beforeRouteEnter:function(e,t,n){n(function(e){var t=localStorage.getItem("user");if(null==t&&(t=""),""!==t){var n=JSON.parse(t);e.$apollo.query({query:S,variables:{client:n.client,token:n.token,uid:n.email}}).then(function(e){var t=e.data.validateSession;""!==t.token&&(n.token=t.token,n.client=t.client,localStorage.setItem("user",oe()(n)))}).catch(function(t){console.log(t),e.$router.push({path:"/login"})})}else e.$router.push({path:"/login"})})}},ke={render:function(){var e=this.$createElement,t=this._self._c||e;return t("v-app",{attrs:{id:"inspire"}},[t("v-content",[t("router-view")],1)],1)},staticRenderFns:[]};var be=n("VU/8")(ge,ke,!1,function(e){n("9fOW")},null,null).exports;o.a.use(r.a);var ye=new r.a({mode:"history",routes:[{path:"/login",name:"Login",component:he},{path:"/app",name:"Application",component:be,children:[{path:":roomid",name:"Room",component:ve},{path:"",name:"Lobby",component:W,canReuse:!1}]},{path:"",redirect:"/app"}]}),_e=n("oYt9"),we=n("u1/p"),Re=n("rp1p"),$e=n("uekS"),xe=n("+dIz"),Ce=n("69U5"),Ie=n("3EgV"),Se=n.n(Ie),Be=(n("7zck"),n("NYxO")),Te=n("fC7K"),Oe=n("/kJX"),Ee=n.n(Oe),Fe=n("Z6Fn"),Me=n("+zi7");o.a.use(Be.a);var De=new Be.a.Store({state:{count:0},mutations:{increment:function(e){e.count++}}});o.a.use(Te.a);var Pe=new Re.a({uri:"http://35.196.37.210/graphql"}),Ae=new $e.a(function(e,t){return t(e)}),Le=new Fe.a({uri:"ws://35.196.37.210/subscriptions",options:{reconnect:!0}}),je=Object($e.f)(function(e){var t=e.query,n=Object(Me.i)(t),o=n.kind,i=n.operation;return"OperationDefinition"===o&&"subscription"===i},Le,Object($e.c)(Ae,Pe)),qe=new we.a({link:je,cache:new xe.a,connectToDevTools:!0});o.a.use(Ce.a);var Ne=new Ce.a({defaultClient:qe});o.a.config.productionTip=!1,o.a.use(_e.a),o.a.use(Se.a,{theme:{primary:"#26d3cd",secondary:"#0a8b88",accent:"#174557",error:"#f44336",warning:"#ffeb3b",info:"#2196f3",success:"#4caf50"},icons:{eraser:"sb-eraser"}}),o.a.use(Ee.a),new o.a({el:"#app",router:ye,provide:Ne.provide(),store:De,components:{App:s},template:"<App/>"})},NVog:function(e,t){},P07D:function(e,t,n){e.exports=n.p+"static/img/banner.38250db.png"},QtLN:function(e,t){},"SDC+":function(e,t){},ZmVN:function(e,t){},iQH9:function(e,t,n){e.exports=n.p+"static/img/logo.61f5306.png"},ixA9:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.068620ea859eca0afb5e.js.map